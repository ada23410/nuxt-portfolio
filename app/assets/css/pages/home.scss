.home-main {
  padding: 10rem 18rem;
  background-color: $color-bg;

  @media (max-width: $breakpoint-xl) {
    padding: 10rem 12rem;
  }

  @media (max-width: $breakpoint-lg) {
    padding: 10rem 6rem;
  }

  /* ========== Hero ========== */
  .Hero-section {
    max-width: min(50vw, 1200px);
    margin: 0 auto;
    text-align: center;

    @media (max-width: $breakpoint-xl) {
      max-width: 60vw;
    }

    @media (max-width: $breakpoint-lg) {
      max-width: 100vw;
    }

    /* Scroll CTA */
    .scroll {
      --gap: 0.5rem;
      --dur: 0.35s;
      --arrow-h: 1.2em;
      --line-thick: 2px;
      --arrow-color: #{$color-text};
      --arrow-color-hover: #66cc66;

      text-align: center;
      margin-top: 5rem;

      .scroll-link {
        display: inline-flex;
        flex-direction: column;
        align-items: center;
        gap: 0.4rem;
        text-decoration: none;
        color: var(--arrow-color);

        .description {
          font-size: $font-size-base;
          font-weight: 500;
          transition: transform var(--dur) ease;
        }

        .arrow {
          position: relative;
          display: inline-grid;
          grid-auto-flow: row;
          grid-auto-rows: 1.2em;
          overflow: hidden;
          height: var(--arrow-h);
          transition: height var(--dur) ease;
          color: inherit;

          &::before {
            content: "";
            position: absolute;
            top: -0.6rem;
            left: 0.5em;
            width: var(--line-thick);
            height: 0.6rem;
            background: currentColor;
            border-radius: 999px;
          }
        }

        .chev {
          width: 1em;
          height: 1em;
          stroke: currentColor;
          stroke-width: 2;
          fill: none;
          stroke-linecap: round;
          stroke-linejoin: round;
          transform: translateY(-100%);
          opacity: 0;
          transition: transform 0.3s ease, opacity 0.3s ease;

          &:nth-child(1) {
            transform: translateY(0);
            opacity: 1;
          }
        }

        &:hover {
          color: var(--arrow-color-hover);

          .description {
            transform: translateY(0.2rem);
          }

          .arrow {
            height: 4em;
          }

          .chev {
            transform: translateY(0);
            opacity: 1;

            &:nth-child(2) {
              transition-delay: 0.05s;
            }
            &:nth-child(3) {
              transition-delay: 0.1s;
            }
          }
        }
      }
    }
  }

  /* ========== Problem Framing ========== */
  .problem-framing {
    margin-top: 5rem;
    margin-inline: -18rem;
    min-height: 600px;
    background-color: $color-bg-dark;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .problem-content {
    max-width: 960px;
    text-align: center;
    p {
      font-size: $font-size-lg;
      color: $color-text-white;
      letter-spacing: 0.12em;
      line-height: 2rem;
    }
    .char {
      display: inline-block;
      opacity: 0;
      transform: translateY(12px) rotate(-3deg);
    }
  }
  /* ========== method-section ========== */
  .method-section {
    margin-top: 5rem;
    margin-inline: -18rem;
    min-height: 600px;
    text-align: center;
    background-color: $color-bg-dark;

    .method-shapes {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 3rem;

      .project-geometry {
        width: 100%;
        max-width: 387px;
        aspect-ratio: 1 / 1;
        background-color: $color-text-light;
        background-position: center;
        background-size: cover;
        background-repeat: no-repeat;

        &.square {
          border-radius: 60px;
          z-index: 2;
        }

        &.circle {
          border-radius: 50%;
          z-index: 1;
        }

        &.triangle {
          -webkit-mask-image: url("/rounded-triangle.svg");
          -webkit-mask-repeat: no-repeat;
          -webkit-mask-size: contain;
          -webkit-mask-position: center;
          mask-image: url("/rounded-triangle.svg");
          mask-repeat: no-repeat;
          mask-size: contain;
          mask-position: center;
        }
      }
    }

    .method-slogan {
        font-size: $font-size-lg;
        color: $color-text-white;
        letter-spacing: 0.12em;
        line-height: 2rem;
    }
  }

  /* ========== Shared Sections ========== */
  .kv-section,
  .resources,
  .about {
    position: relative;
    margin-bottom: 8rem;

    .section-title {
      position: absolute;
      left: 50%;
      top: 15%;
      transform: translateX(-50%);
      font-size: $font-size-xxxl;
      font-weight: 500;
      color: $color-text;
      z-index: 0;
    }

    .resources-title {
      @extend .section-title;
      top: -5%;
    }

    .about-title {
      @extend .section-title;
      top: 0%;
    }

    /* ========== Project Blocks ========== */
    .project-card {
      display: flex;
      justify-content: space-between;
      gap: 2rem;
      min-height: 600px;
      padding: 5rem 0;

      .project-shape {
        position: relative;
        width: 378px;
        min-height: 600px; // 控制整個構圖高度
        .project-geometry {
          position: absolute;
          width: 100%;
          max-width: 387px;
          aspect-ratio: 1 / 1;
          background-color: $color-text-light;
          background-position: center;
          background-size: cover;
          background-repeat: no-repeat;
    
          &.square {
            top: 25%;
            border-radius: 60px;
            z-index: 2;
          }

          &.circle {
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 50%;
            z-index: 1;
          }

          &.triangle {
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
            -webkit-mask-image: url("/rounded-triangle.svg");
            -webkit-mask-repeat: no-repeat;
            -webkit-mask-size: contain;
            -webkit-mask-position: center;
            mask-image: url("/rounded-triangle.svg");
            mask-repeat: no-repeat;
            mask-size: contain;
            mask-position: center;
          }
        }
      }
    }

    /* ========== Resources Card ========== */
    .resource-card {
      padding: 5rem 0;

      .resource-shape {
        opacity: 0;
        will-change: transform, opacity;
      }
    }

    /* ========== About (Inorganic Pills) ========== */
    .inorganic {
      --h: clamp(540px, 30vw, 630px);
      --w: clamp(260px, 20vw, 260px);
      --r: 90px;
      --overlap: 10px;

      display: flex;
      align-items: center;
      justify-content: center;
      padding: 5rem 0;
      opacity: 0;
      will-change: transform, opacity;

      .pill {
        width: var(--w);
        height: var(--h);
        border-radius: calc(var(--r) * 1.5);
        background-image: url("/avatar-01.png");
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
        background-blend-mode: multiply;

        &:nth-child(1) { background-position: 0% 20%; filter: brightness(1.2); }
        &:nth-child(2) { background-position: 20% 40%; }
        &:nth-child(3) { background-position: 40% 60%; filter: brightness(0.9); }
        &:nth-child(4) { background-position: 60% 80%; filter: brightness(0.8); }
        &:nth-child(5) { background-position: 80% 100%; filter: brightness(0.7); }
        &:nth-child(6) { background-position: 100% 50%; filter: brightness(0.6); }
      }

      .pill + .pill {
        margin-left: calc(-1 * var(--overlap));
      }
    }

    /* ========== Look More CTA ========== */
    .look-more {
      text-align: left;
      --gap: 0.75rem;
      --dur: 0.36s;
      opacity: 0;
      will-change: transform, opacity;

      a {
        display: inline-flex;
        align-items: center;
        gap: var(--gap);
        text-decoration: none;
        color: $color-text;

        .description {
          font-size: $font-size-xxl;
          font-weight: 500;
          transition: transform var(--dur) ease;
        }

        .arrow {
          font-size: $font-size-xxl;
          display: inline-grid;
          grid-auto-flow: column;
          grid-auto-columns: 1.2em;
          overflow: hidden;
          width: 1.2em;
          transition: width var(--dur) ease;

          i {
            transform: translateX(-100%);
            opacity: 0;
            transition: transform var(--dur) ease, opacity var(--dur) ease;

            &:nth-child(1) {
              transform: translateX(0);
              opacity: 1;
            }
          }
        }

        &:hover {
          .description {
            transform: translateX(0.2rem);
          }

          .arrow {
            width: 4em;

            i {
              transform: translateX(0);
              opacity: 1;

              &:nth-child(2) { transition-delay: 0.04s; }
              &:nth-child(3) { transition-delay: 0.08s; }
            }
          }
        }
      }
    }
  }

  /* ========== Services ========== */
  .services {
    position: relative;
    margin-bottom: 8rem;

    .services-title {
      position: absolute;
      left: 50%;
      top: 0;
      transform: translateX(-50%);
      font-size: $font-size-xxl;
      color: $color-text;
    }

    .services-card {
      display: flex;
      justify-content: space-between;
      align-items: start;
      gap: 2rem;
      padding: 5rem 0;
      opacity: 0;
      will-change: transform, opacity;

      .card {
        width: 100%;
        min-height: 460px;
        background-color: $color-bg-alt;
        border-radius: 60px;

        .card-head {
          margin-bottom: 2rem;
          overflow: hidden;
        }

        .card-body {
          max-width: 250px;
          margin: 0 auto;

          .card-title {
            text-align: center;
            font-size: $font-size-xl;
            margin-bottom: 1rem;
          }

          .card-subtitle {
            text-align: center;
            font-size: $font-size-base;
            margin-bottom: 2rem;
          }

          ul {
            list-style: square;

            li {
              font-size: $font-size-base;
              color: $color-text-light;
              line-height: 2rem;
            }
          }
        }
      }
    }
  }
}